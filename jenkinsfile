pipeline {
    agent any

    environment {
        SOURCE_DIR = "/path/to/source_directory"
        BACKUP_DIR = "/path/to/backup_directory"
    }

    stages {
        stage('Checkout') {
            steps {
                // Clone the repository containing the shell script
                git 'https://your-repository-url.git'
            }
        }
        
        stage('Make Script Executable') {
            steps {
                // Make the shell script executable
                sh 'chmod +x backup.sh'
            }
        }

        stage('Run Backup Script') {
            steps {
                // Run the backup script with the specified source and backup directories
                sh "./backup.sh ${SOURCE_DIR} ${BACKUP_DIR}"
            }
        }
    }
    
    post {
        always {
            // Clean up the workspace after the pipeline run
            cleanWs()
        }
    }
}
